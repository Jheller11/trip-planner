extends ../layout.pug

block content
        .container
            if (trip.name === undefined)
                p Please go back to select a trip.
            else
                h3 Trip Name: #{trip.name}
                p Destination: #{trip.location.city}
                - let dTrip = trip.createdAt
                - let dayTrip = dTrip.getDate()
                - let monthTrip = dTrip.getMonth() + 1
                - let yearTrip = dTrip.getFullYear()
                - let dateTrip = `${monthTrip}/${dayTrip}/${yearTrip}`
                p Created: #{dateTrip}
                p Confirmed Attending:
                ul
                    each person, index in trip.attending
                        li= (index + 1) + ': ' + person.displayName
                //- form for adding a person to the list + options to remove or edit a person
                form(method="POST" action=`/trips/${trip.id}?_method=PUT`)      
                    button.btn.btn-info(type='submit') Join Trip 
                a(href=`${trip.accomadation.url}`) View Housing
                p Total Cost of Rental: #{trip.accomadation.price}

                a(href=`/trips/edit/${trip.id}`) Edit Trip

        .container
            h4 Message Board
            each message in trip.messages
                .card
                    - let d = message.createdAt
                    - let day = d.getDate()
                    -let month = d.getMonth() + 1
                    - let year = d.getFullYear()
                    - let date = `${month}/${day}/${year}`
                    p 
                        span #{message.user.displayName} 
                        span on 
                        span #{date}
                        span : 
                        span "#{message.message}"
                    span Category: #{message.category}

            
            form(method="POST" action=`/trips/${trip.id}`)
                label(for="message") Message:
                input(type="text" placeholder='...' name="message")
                label(for="category") Category:
                select(for="category" name='category')
                    option(value="hotel") Hotel
                    option(value="activities") Activities
                    option(value="travel") Travel
                    option(value="other") Other
                button.btn.btn-info.ml-3(type="submit") Post



    
        